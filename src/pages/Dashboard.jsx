import React, { useEffect, useState } from 'react'
import AfterLoginNavbar from './AfterLoginNavbar'
import DashboardNavbar from './DashboardNavbar'
import { Outlet } from 'react-router-dom'
import axios from 'axios';
import { useGetUserID } from '../hooks/useGetUserID';


function Dashboard() {
 const [user,setUser] = useState({});
 

 let config = {
  headers: {
    'Authorization': 'Bearer ' + useGetUserID()
  }
}
  

  useEffect(()=>{
    const fetchUser = async()=>{
        try{
          const responce = await axios.get("http://localhost:5000/api/user/validate",config);
          setUser(responce.data);
          console.log(responce.data);
        }
        catch(err){
          console.log(err);
        }
    }
    fetchUser()
  },[])


  return (


    <>
    <AfterLoginNavbar user={user}/>

    <div className='dashboard-holder'>
      <div className="curves">
        <svg id="wave" style={{transform:"rotate(180deg)", transition: "0.3s"}} viewBox="0 0 1440 490" version="1.1" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="sw-gradient-0" x1="0" x2="0" y1="1" y2="0"><stop stop-color="rgba(87.584, 27.741, 246.263, 1)" offset="0%"></stop><stop stop-color="rgba(198.45, 18.993, 91.648, 1)" offset="100%"></stop></linearGradient></defs><path style={{transform:"translate(0, 0px)", opacity:"1"}} fill="url(#sw-gradient-0)" d="M0,0L80,0C160,0,320,0,480,65.3C640,131,800,261,960,318.5C1120,376,1280,359,1440,294C1600,229,1760,114,1920,89.8C2080,65,2240,131,2400,138.8C2560,147,2720,98,2880,98C3040,98,3200,147,3360,187.8C3520,229,3680,261,3840,261.3C4000,261,4160,229,4320,245C4480,261,4640,327,4800,326.7C4960,327,5120,261,5280,228.7C5440,196,5600,196,5760,228.7C5920,261,6080,327,6240,294C6400,261,6560,131,6720,81.7C6880,33,7040,65,7200,65.3C7360,65,7520,33,7680,73.5C7840,114,8000,229,8160,269.5C8320,310,8480,278,8640,245C8800,212,8960,180,9120,204.2C9280,229,9440,310,9600,326.7C9760,343,9920,294,10080,253.2C10240,212,10400,180,10560,212.3C10720,245,10880,343,11040,375.7C11200,408,11360,376,11440,359.3L11520,343L11520,490L11440,490C11360,490,11200,490,11040,490C10880,490,10720,490,10560,490C10400,490,10240,490,10080,490C9920,490,9760,490,9600,490C9440,490,9280,490,9120,490C8960,490,8800,490,8640,490C8480,490,8320,490,8160,490C8000,490,7840,490,7680,490C7520,490,7360,490,7200,490C7040,490,6880,490,6720,490C6560,490,6400,490,6240,490C6080,490,5920,490,5760,490C5600,490,5440,490,5280,490C5120,490,4960,490,4800,490C4640,490,4480,490,4320,490C4160,490,4000,490,3840,490C3680,490,3520,490,3360,490C3200,490,3040,490,2880,490C2720,490,2560,490,2400,490C2240,490,2080,490,1920,490C1760,490,1600,490,1440,490C1280,490,1120,490,960,490C800,490,640,490,480,490C320,490,160,490,80,490L0,490Z"></path><defs><linearGradient id="sw-gradient-1" x1="0" x2="0" y1="1" y2="0"><stop stop-color="rgba(173.861, 38.238, 120.715, 1)" offset="0%"></stop><stop stop-color="rgba(11, 18.578, 255, 0.35)" offset="100%"></stop></linearGradient></defs><path style={{transform:"translate(0, 50px)", opacity:"0.9"}} fill="url(#sw-gradient-1)" d="M0,343L80,351.2C160,359,320,376,480,326.7C640,278,800,163,960,171.5C1120,180,1280,310,1440,367.5C1600,425,1760,408,1920,359.3C2080,310,2240,229,2400,236.8C2560,245,2720,343,2880,375.7C3040,408,3200,376,3360,359.3C3520,343,3680,343,3840,285.8C4000,229,4160,114,4320,65.3C4480,16,4640,33,4800,89.8C4960,147,5120,245,5280,236.8C5440,229,5600,114,5760,89.8C5920,65,6080,131,6240,130.7C6400,131,6560,65,6720,73.5C6880,82,7040,163,7200,220.5C7360,278,7520,310,7680,343C7840,376,8000,408,8160,375.7C8320,343,8480,245,8640,236.8C8800,229,8960,310,9120,343C9280,376,9440,359,9600,294C9760,229,9920,114,10080,122.5C10240,131,10400,261,10560,302.2C10720,343,10880,294,11040,277.7C11200,261,11360,278,11440,285.8L11520,294L11520,490L11440,490C11360,490,11200,490,11040,490C10880,490,10720,490,10560,490C10400,490,10240,490,10080,490C9920,490,9760,490,9600,490C9440,490,9280,490,9120,490C8960,490,8800,490,8640,490C8480,490,8320,490,8160,490C8000,490,7840,490,7680,490C7520,490,7360,490,7200,490C7040,490,6880,490,6720,490C6560,490,6400,490,6240,490C6080,490,5920,490,5760,490C5600,490,5440,490,5280,490C5120,490,4960,490,4800,490C4640,490,4480,490,4320,490C4160,490,4000,490,3840,490C3680,490,3520,490,3360,490C3200,490,3040,490,2880,490C2720,490,2560,490,2400,490C2240,490,2080,490,1920,490C1760,490,1600,490,1440,490C1280,490,1120,490,960,490C800,490,640,490,480,490C320,490,160,490,80,490L0,490Z"></path></svg>
      </div>

      <div className="dashboard">
      <DashboardNavbar user={user}/>
      <Outlet></Outlet>
      </div>
    </div>
    
    </>
    
  )
}

export default Dashboard
